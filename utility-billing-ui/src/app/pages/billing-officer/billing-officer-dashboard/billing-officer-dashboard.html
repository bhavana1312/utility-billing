<div class="layout" [class.sidebar-collapsed]="isSidebarCollapsed">
  <app-billing-sidebar #sidebar (sidebarToggle)="onSidebarToggle($event)">
  </app-billing-sidebar>

  <main class="content">
    <header class="mobile-top-nav">
      <button class="toggle-btn" (click)="sidebar.toggleSidebar()" [class.is-collapsed]="isSidebarCollapsed">
        <span class="arrow">â€¹</span>
      </button>

      <div class="mobile-brand">
        <span class="bolt">ðŸ’³</span>
        <span class="brand-name">Utility<span>Billing</span></span>
      </div>
    </header>

    <div class="dashboard-header">
      <h2>Billing Dashboard</h2>
      <span class="date-display">{{ today | date:'fullDate' }}</span>
    </div>

    <div class="stats">
      <div class="card">
        <h4>Total Bills</h4>
        <p>{{ totalBills }}</p>
      </div>

      <div class="card">
        <h4>Total Revenue</h4>
        <p>â‚¹ {{ totalRevenue | number:'1.2-2' }}</p>
      </div>

      <div class="card">
        <h4>Outstanding</h4>
        <p>â‚¹ {{ outstandingAmount | number:'1.2-2' }}</p>
      </div>
    </div>

    <div class="charts-row">
      <div class="chart-box">
        <h3>Bill Status</h3>
        <div class="chart-canvas">
          <canvas id="statusChart"></canvas>
        </div>
      </div>

      <div class="chart-box">
        <h3>Revenue by Utility</h3>
        <div class="chart-canvas">
          <canvas id="utilityChart"></canvas>
        </div>
      </div>
    </div>

    <div class="chart-box full">
      <h3>Bills Over Time</h3>
      <div class="chart-canvas">
        <canvas id="timeChart"></canvas>
      </div>
    </div>

    <div class="table-box desktop-only">
      <h3>Total Bills</h3>

      <table>
        <thead>
          <tr>
            <th>Bill ID</th>
            <th>Utility</th>
            <th>Units</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Due Date</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let b of bills">
            <td>{{ b.billId }}</td>
            <td>{{ b.utilityType }}</td>
            <td>{{ b.unitsConsumed }}</td>
            <td>â‚¹ {{ b.totalAmount }}</td>
            <td class="status" [class.paid]="b.status==='PAID'" [class.due]="b.status==='DUE'"
              [class.overdue]="b.status==='OVERDUE'">
              {{ b.status }}
            </td>
            <td>{{ b.dueDate | date:'mediumDate' }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="mobile-cards">
      <div class="bill-card" *ngFor="let b of bills">
        <div><strong>Bill ID</strong><span>{{ b.billId }}</span></div>
        <div><strong>Utility</strong><span>{{ b.utilityType }}</span></div>
        <div><strong>Units</strong><span>{{ b.unitsConsumed }}</span></div>
        <div><strong>Amount</strong><span>â‚¹ {{ b.totalAmount }}</span></div>
        <div class="status" [class.paid]="b.status==='PAID'" [class.due]="b.status==='DUE'"
          [class.overdue]="b.status==='OVERDUE'">
          {{ b.status }}
        </div>
        <div><strong>Due</strong><span>{{ b.dueDate | date }}</span></div>
      </div>
    </div>
  </main>
</div>